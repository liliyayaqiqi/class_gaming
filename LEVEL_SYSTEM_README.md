# 🎮 关卡系统说明

## ✅ 已完成功能

### 1. 三个难度递增的关卡

#### 第一关：教学关 (简单)
- **地图**: 3×3 网格
- **警察数量**: 2个
- **难度**: 简单，适合学习游戏规则
- **小偷位置**: 左下角
- **出口位置**: 右上角

#### 第二关：中级挑战 (中等)
- **地图**: 4×4 网格，带部分对角线连接
- **警察数量**: 3个
- **难度**: 中等，需要策略
- **小偷位置**: 左下角
- **出口位置**: 右上角

#### 第三关：终极挑战 (困难)
- **地图**: 5×4 复杂网格，多条对角线
- **警察数量**: 4个
- **难度**: 最高，需要仔细规划
- **小偷位置**: 左中位置
- **出口位置**: 右上角

### 2. 完整的场景系统

#### MenuScene (开始菜单)
- 显示游戏标题
- 三个关卡选择按钮
- 每个按钮显示关卡名称和描述
- 悬停动画效果

#### GameScene (游戏场景)
- 支持关卡配置加载
- 显示当前关卡名称
- 动态图片缩放
- 智能AI小偷
- 菜单和重来按钮

#### VictoryScene (关卡胜利)
- 显示过关信息
- 鼓励语（每关不同）
- 下一关按钮（前两关）
- 返回菜单按钮
- 重玩本关按钮
- 第三关自动跳转到终极胜利

#### FinalVictoryScene (终极胜利)
- 华丽的胜利动画
- 星星粒子效果
- 成就列表展示
- 返回菜单和再玩一次按钮

### 3. 游戏流程

```
开始游戏
    ↓
MenuScene (选择关卡)
    ↓
GameScene (玩游戏)
    ↓
  胜利? ──否→ 重新开始本关
    ↓是
VictoryScene (过关页面)
    ↓
 第3关? ──否→ 下一关 / 返回菜单
    ↓是
FinalVictoryScene (终极胜利)
    ↓
返回菜单 / 重新开始
```

## 📁 新增文件

```
src/
├── LevelConfig.js        # 关卡配置（地图、警察位置等）
├── MenuScene.js          # 开始菜单场景
├── VictoryScene.js       # 关卡胜利场景
├── FinalVictoryScene.js  # 终极胜利场景
├── GameScene.js          # 游戏场景（已修改）
└── main.js               # 入口文件（已修改）
```

## 🎯 关键特性

### 1. 灵活的关卡配置系统
- 在 `LevelConfig.js` 中定义关卡
- 每个关卡包含：
  - 地图结构（节点和边）
  - 小偷初始位置
  - 警察数量和位置
  - 关卡名称和描述

### 2. 场景间数据传递
```javascript
// 启动游戏场景并传递关卡数据
this.scene.start('GameScene', { level: 1 })

// 在 GameScene 中接收
init(data) {
  this.currentLevel = data.level || 1
}
```

### 3. 游戏结果处理
- **警察胜利**: 播放爆炸效果 → 2.5秒后跳转到 VictoryScene
- **小偷逃脱**: 显示失败信息 → 3秒后重新开始本关

### 4. 适合一年级小朋友的设计
- ✅ 从简单到困难的渐进式学习
- ✅ 第一关是教学关，地图小而简单
- ✅ 清晰的视觉反馈和鼓励语
- ✅ 华丽的胜利动画增加成就感

## 🎨 UI 设计

### 颜色方案
- **第一关按钮**: 绿色 (#4caf50) - 简单、安全
- **第二关按钮**: 橙色 (#ff9800) - 中等难度
- **第三关按钮**: 红色 (#f44336) - 高难度、挑战

### 动画效果
- 按钮悬停放大效果
- 标题淡入动画
- 星星粒子闪烁
- 爆炸特效

## 🚀 如何添加新关卡

在 `src/LevelConfig.js` 中添加：

```javascript
export const LEVELS = {
  // ... 现有关卡 ...
  
  4: {
    name: '第四关：超级挑战',
    description: '更大的地图！',
    difficulty: 'expert',
    graph: {
      nodes: [
        // 定义节点
      ],
      edges: [
        // 定义连接
      ]
    },
    thiefPosition: 0,
    policeCount: 5,
    policePositions: [1, 2, 3, 4, 5]
  }
}
```

然后在 `MenuScene.js` 中添加对应的按钮。

## 🎮 游戏玩法

1. **开始**: 在菜单选择关卡
2. **选择警察**: 点击警察所在的节点
3. **移动警察**: 点击相邻的高亮节点
4. **目标**: 在小偷到达出口前将其包围
5. **胜利**: 小偷无路可走
6. **失败**: 小偷到达出口

## 📊 关卡难度对比

| 关卡 | 地图大小 | 节点数 | 警察数 | 连接复杂度 |
|------|---------|--------|--------|-----------|
| 第1关 | 3×3 | 9 | 2 | 简单 |
| 第2关 | 4×4 | 16 | 3 | 中等 |
| 第3关 | 5×4 | 20 | 4 | 复杂 |

## 🎉 完成！

现在刷新页面，你会看到：
1. 精美的开始菜单
2. 三个可选关卡
3. 完整的游戏流程
4. 华丽的胜利动画

祝游戏愉快！🎮

